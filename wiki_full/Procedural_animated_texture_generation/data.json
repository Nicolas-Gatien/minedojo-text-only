{"metadata": {"url": "https://minecraft.fandom.com/wiki/Procedural_animated_texture_generation", "title": "Procedural_animated_texture_generation", "time": "18/04/2022 15:34:13"}, "tables": [], "images": [{"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/6/6d/Gear_%28texture%29_JE1.png", "path": "images/img.png", "alt_text": "", "caption": null, "bbox": [443.984375, 2424.953125, 120, 120]}, {"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/d/d5/Gear_%28middle_texture%29_JE1.png", "path": "images/img (1).png", "alt_text": "", "caption": null, "bbox": [601.984375, 2424.953125, 120, 120]}, {"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/1/1b/Invicon_Gear.gif", "path": "images/img.png", "alt_text": "", "caption": null, "bbox": [443.984375, 2794.453125, 120, 120]}, {"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/0/0c/Gear_1_%28texture%29_JE1-a1.gif", "path": "images/img.png", "alt_text": "", "caption": null, "bbox": [601.984375, 2794.453125, 120, 120]}, {"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/0/07/Clock_%28texture%29_JE1_BE1.png", "path": "images/img (2).png", "alt_text": "", "caption": null, "bbox": [443.984375, 5739.328125, 120, 120]}, {"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/4/48/Dial_%28texture%29_JE1.png", "path": "images/img (3).png", "alt_text": "", "caption": null, "bbox": [601.984375, 5739.328125, 120, 120]}, {"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/7/7e/Clock_JE1.gif", "path": "images/img.png", "alt_text": "", "caption": null, "bbox": [443.984375, 6084.328125, 120, 120]}, {"src": "https://static.wikia.nocookie.net/minecraft_gamepedia/images/c/c2/Clock_JE2_BE2.gif", "path": "images/img.png", "alt_text": "", "caption": null, "bbox": [601.984375, 6084.328125, 120, 120]}], "sprites": [{"text": null, "bbox": [220.046875, 1175.109375, 16, 16]}, {"text": null, "bbox": [220.046875, 4207.046875, 16, 16]}, {"text": null, "bbox": [220.046875, 4437.984375, 16, 16]}, {"text": null, "bbox": [220.046875, 6345.421875, 16, 16]}], "texts": [{"text": "Procedural animated texture generation", "bbox": [202.046875, 313, 593, 90]}, {"text": "Prior to Java Edition 1.5 snapshot 13w02a,[more information needed] the textures for animated blocks were generated on-the-fly using certain algorithms, rather than being defined image files.", "bbox": [202.046875, 423, 726, 49]}, {"text": "In cases such as when the texture could not be loaded, dedicated placeholder textures would be loaded instead.", "bbox": [202.046875, 496, 726, 25]}, {"text": "Contents", "bbox": [215.046875, 560.25, 81, 17]}, {"text": "1 Blocks\n1.1 Fire\n1.2 Nether portals\n1.3 Gears\n2 Fluids\n2.1 Water\n2.1.1 Still water\n2.1.2 Flowing water\n2.2 Lava\n2.2.1 Still lava\n2.2.2 Flowing lava\n3 Items\n3.1 Clocks\n3.2 Compasses\n4 References", "bbox": [203.046875, 593.515625, 185, 446]}, {"text": "Blocks", "bbox": [202.046875, 1064.015625, 726, 43]}, {"text": "Fire", "bbox": [202.046875, 1131.015625, 726, 23]}, {"text": "Nether portals", "bbox": [202.046875, 1249.953125, 726, 22]}, {"text": "Due to the large number of Atan2 and Sine operations, all of the animation frames for the portal block are generated once at-startup, with each frame's data being stored in an array of all the frames.", "bbox": [202.046875, 1284.453125, 726, 49]}, {"text": "To generate a frame of the Nether portal animation:", "bbox": [202.046875, 1357.453125, 726, 25]}, {"text": "Note that Minecraft performs almost all of its color calculations in linear space, and only applies gamma correction near the end of rendering. If your Nether portal's colors appear to be off, apply a gamma correction of 2.2.", "bbox": [202.046875, 2171.953125, 726, 49]}, {"text": "Gears", "bbox": [202.046875, 2244.953125, 726, 22]}, {"text": "Code which generates the frames of the gear texture can be found here.", "bbox": [202.046875, 2279.453125, 726, 25]}, {"text": "The animation for gears was generated using two predefined image files - misc/gear.png for the rotating gear and misc/gearmiddle.png for the stationary center.", "bbox": [202.046875, 2327.953125, 726, 49]}, {"text": "misc/gear.png\nmisc/gearmiddle.png", "bbox": [238.046875, 2400.953125, 690, 181]}, {"text": "misc/gear.png", "bbox": [426.484375, 2560.953125, 155, 19]}, {"text": "misc/gearmiddle.png", "bbox": [584.484375, 2560.953125, 155, 19]}, {"text": "The animation, updated every game tick,[1] is rendered as a 16x16 texture like most other blocks. The resulting gear has 18.75 RPM.[1]", "bbox": [202.046875, 2599.953125, 726, 49]}, {"text": "There are two different animations used for gears - one for clockwise rotation, and another for anticlockwise rotation, to allow for logical meshing. These are generated effectively identically, with the only difference being the direction of rotation; both start on the same frame, but cycle through them in the opposite direction.[1]", "bbox": [202.046875, 2672.953125, 726, 73]}, {"text": "Clockwise rotation\nAnticlockwise rotation", "bbox": [238.046875, 2770.453125, 690, 180]}, {"text": "Clockwise rotation", "bbox": [426.484375, 2930.453125, 155, 18]}, {"text": "Anticlockwise rotation", "bbox": [584.484375, 2930.453125, 155, 18]}, {"text": "Fluids", "bbox": [202.046875, 2974.453125, 726, 43]}, {"text": "Fluid textures are generated via 3-layer non-deterministic cellular automata, which modify the RGB and alpha values of the texture accordingly,[2] along with shifting of the texture to emulate flowing. Each layer is represented as an array of floats, each with 256 elements, corresponding to the 256 (16x16) texture pixels within the block.[2]", "bbox": [202.046875, 3026.453125, 726, 74]}, {"text": "As can be seen when loading up a world with water or lava in view, the textures start as a solid color before the cellular automaton starts generating the texture.", "bbox": [202.046875, 3123.953125, 726, 49]}, {"text": "Indexes which end up outside of the bounds of the texture reappear at the opposite respective side.[2]", "bbox": [202.046875, 3196.953125, 726, 24]}, {"text": "For the purposes of explanation, the variables used have been named (arbitrarily) as attributes of a boiling pot of soup over a fire.[2] The first layer represents the flame_heat value (which can be either negative or positive), the second layer represents the pot_heat value and the third layer represents the soup_heat value.", "bbox": [202.046875, 3245.453125, 726, 74]}, {"text": "Note that Java Edition and Bedrock Edition used different pseudorandom generators for generating all random numbers in the game (Java Edition using a LCG whereas Pocket Edition used a MT19937), which includes the random numbers used for water and lava. Due to being random, however, this likely has negligible visual impact.", "bbox": [202.046875, 3342.953125, 726, 73]}, {"text": "Water", "bbox": [202.046875, 3440.453125, 726, 23]}, {"text": "Still water", "bbox": [202.046875, 3480.953125, 726, 20]}, {"text": "Adapted from https://github.com/UnknownShadow200/ClassiCube/wiki/MInecraft-Classic-lava-animation-algorithm#water", "bbox": [202.046875, 3509.953125, 726, 49]}, {"text": "Every frame, for each position in the still water texture array, the respective values for soup_heat, pot_heat and flame_heat are calculated as detailed below:", "bbox": [202.046875, 3582.953125, 726, 49]}, {"text": "Calculates a local_soup_heat equal to the sum of the 3x1 soup_heat neighborhood around the current element.\nCalculates the new soup_heat as the sum of the local_soup_heat divided by 3.3F plus the pot_heat times 0.8F\nCalculates the new pot_heat as the current pot_heat plus the flame_heat times 0.05. pot_heat is clamped to a minimum of 0.\nCalculates the new flame_heat as the current flame_heat minus 0.1F.\nHowever, there is a 0.05 in 1 random chance that flame_heat is set to 0.5.", "bbox": [238.046875, 3655.953125, 690, 202]}, {"text": "Once the above arrays have been updated, for each pixel in the water texture, the color and alpha values are calculated based on soup_heat:", "bbox": [202.046875, 3875.953125, 726, 49]}, {"text": "Calculates a color_heat as the soup_heat clamped between 0 and 1 inclusive.\nThen it calculates the color components of the pixel as follows:\nfloat red = 32 + color_heat^2 * 32\nfloat green = 50 + color_heat^2 * 64\nfloat blue = 255\nfloat alpha = 146 + color_heat^2 * 50", "bbox": [238.046875, 3948.953125, 690, 153]}, {"text": "The red, green and blue values are then converted to bytes and assigned to the texture accordingly.", "bbox": [202.046875, 4119.953125, 726, 24]}, {"text": "Flowing water", "bbox": [202.046875, 4168.453125, 726, 20]}, {"text": "In addition, the flowing water texture also uses a spatial translation to give the appearance of movement. This transformation moves the flowing water texture downwards by one pixel after a fixed amount of time,[more information needed] wrapping the bottom layer of the texture back to the top.", "bbox": [202.046875, 4296.390625, 726, 74]}, {"text": "Lava", "bbox": [202.046875, 4393.890625, 726, 22]}, {"text": "Still lava", "bbox": [202.046875, 4506.828125, 726, 20]}, {"text": "Adapted from https://github.com/UnknownShadow200/ClassiCube/wiki/MInecraft-Classic-lava-animation-algorithm#lava", "bbox": [202.046875, 4535.828125, 726, 49]}, {"text": "Every frame, for each position in the still water texture array, the respective values for soup_heat, pot_heat and flame_heat are calculated as detailed below:", "bbox": [202.046875, 4608.828125, 726, 49]}, {"text": "Calculates a local_soup_heat equal to the sum of the 3x3 soup_heat neighborhood around the current element but offset vertically by colSin******* and offset horizontally by rowSin*********.\nrowSin is 1.2 times the sign of an angle that starts at 0 and changes by 22.5 degrees every row.\ncolSin is 1.2 times the sign of an angle that starts at 0 and changes by 22.5 degrees every column.\nCalculates a local_pot_heat equal to the sum of a 2x2 pot_heat neighborhood around the current pot_heat, with the current position being the upper left of the 2x2 neighborhood.\nCalculates the new soup_heat as the sum of the local_soup_heat divided by 10 plus the local_pot_heat divided by 4 times 0.8.\nCalculates the new pot_heat as the current pot_heat plus the flame_heat times 0.01***************. pot_heat is clamped to a minimum of 0.\nCalculates the new flame_heat as the current flame_heat minus 0.06.\nHowever, there is a 0.005 in 1 random chance that flame_heat is set to 1.5.", "bbox": [238.046875, 4681.828125, 690, 422]}, {"text": "Once the above arrays have been updated, for each pixel in the lava texture, the color values are calculated based on soup_heat (alpha is always opaque for lava):", "bbox": [202.046875, 5121.828125, 726, 49]}, {"text": "Calculates a color_heat as double the soup_heat clamped between 0 and 1 inclusive.\nThen it calculates the color components of the pixel as follows:\nfloat red = color_heat * 100F + 155F\nfloat green = color_heat^2 * 255F\nfloat blue = color_heat^4 * 128F", "bbox": [238.046875, 5194.828125, 690, 153]}, {"text": "The red, green and blue values are then converted to bytes and assigned to the texture accordingly.", "bbox": [202.046875, 5365.828125, 726, 24]}, {"text": "Flowing lava", "bbox": [202.046875, 5414.328125, 726, 20]}, {"text": "Flowing lava uses the exact same texture as still lava, however there is also a spatial translation to give the appearance of movement. This transformation moves the lava texture downwards by one pixel after a fixed amount of time,[more information needed] wrapping the bottom layer of the texture back to the top.", "bbox": [202.046875, 5443.328125, 726, 74]}, {"text": "Items", "bbox": [202.046875, 5540.828125, 726, 43]}, {"text": "Clocks", "bbox": [202.046875, 5607.828125, 726, 22]}, {"text": "To generate its appearances, the clock combined 2 textures, one being the actual clock, and the other being the dial.", "bbox": [202.046875, 5642.328125, 726, 49]}, {"text": "Clock texture file\ndial.png", "bbox": [238.046875, 5715.328125, 690, 181]}, {"text": "Clock texture file", "bbox": [426.484375, 5875.328125, 155, 18]}, {"text": "dial.png", "bbox": [584.484375, 5875.328125, 155, 19]}, {"text": "The clock's texture could be changed without worrying about breaking the dial, as long as the transparency remained unaffected.[more information needed]", "bbox": [202.046875, 5914.328125, 726, 49]}, {"text": "This texture combination allowed for clocks to be very precise, having 228 visually distinct frames. The animated texture approach, used in 1.5 onwards, is far less precise, with only 64 different frames.", "bbox": [202.046875, 5987.328125, 726, 49]}, {"text": "Clock animation as generated through the clock base and dial.png\nClock animation as generated through defined frames", "bbox": [238.046875, 6060.328125, 690, 217]}, {"text": "Clock animation as generated through the clock base and dial.png", "bbox": [426.484375, 6220.328125, 155, 55]}, {"text": "Clock animation as generated through defined frames", "bbox": [584.484375, 6220.328125, 155, 54]}, {"text": "Compasses", "bbox": [202.046875, 6301.328125, 726, 23]}, {"text": "References", "bbox": [202.046875, 6458.765625, 726, 43]}, {"text": "https://github.com/NeRdTheNed/MC-TextureGen/releases/tag/v1.2.0", "bbox": [275.046875, 6513.765625, 457, 17]}, {"text": "https://github.com/UnknownShadow200/ClassiCube/wiki/MInecraft-Classic-lava-animation-algorithm", "bbox": [238.046875, 6538.265625, 653, 42]}]}