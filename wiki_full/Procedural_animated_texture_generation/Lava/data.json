{"metadata": {"url": "https://minecraft.fandom.com/wiki/Procedural_animated_texture_generation/Lava", "title": "Procedural_animated_texture_generation/Lava", "time": "17/04/2022 03:10:26"}, "tables": [], "images": [], "sprites": [{"text": null, "bbox": [220.046875, 457.09375, 16, 16]}], "texts": [{"text": "Procedural animated texture generation/Lava", "bbox": [202.046875, 313, 593, 90]}, {"text": "Still lava", "bbox": [202.046875, 525.9375, 726, 20]}, {"text": "Adapted from https://github.com/UnknownShadow200/ClassiCube/wiki/MInecraft-Classic-lava-animation-algorithm#lava", "bbox": [202.046875, 554.9375, 726, 49]}, {"text": "Every frame, for each position in the still water texture array, the respective values for soup_heat, pot_heat and flame_heat are calculated as detailed below:", "bbox": [202.046875, 627.9375, 726, 49]}, {"text": "Calculates a local_soup_heat equal to the sum of the 3x3 soup_heat neighborhood around the current element but offset vertically by colSin******* and offset horizontally by rowSin*********.\nrowSin is 1.2 times the sign of an angle that starts at 0 and changes by 22.5 degrees every row.\ncolSin is 1.2 times the sign of an angle that starts at 0 and changes by 22.5 degrees every column.\nCalculates a local_pot_heat equal to the sum of a 2x2 pot_heat neighborhood around the current pot_heat, with the current position being the upper left of the 2x2 neighborhood.\nCalculates the new soup_heat as the sum of the local_soup_heat divided by 10 plus the local_pot_heat divided by 4 times 0.8.\nCalculates the new pot_heat as the current pot_heat plus the flame_heat times 0.01***************. pot_heat is clamped to a minimum of 0.\nCalculates the new flame_heat as the current flame_heat minus 0.06.\nHowever, there is a 0.005 in 1 random chance that flame_heat is set to 1.5.", "bbox": [238.046875, 700.9375, 690, 422]}, {"text": "Once the above arrays have been updated, for each pixel in the lava texture, the color values are calculated based on soup_heat (alpha is always opaque for lava):", "bbox": [202.046875, 1140.9375, 726, 49]}, {"text": "Calculates a color_heat as double the soup_heat clamped between 0 and 1 inclusive.\nThen it calculates the color components of the pixel as follows:\nfloat red = color_heat * 100F + 155F\nfloat green = color_heat^2 * 255F\nfloat blue = color_heat^4 * 128F", "bbox": [238.046875, 1213.9375, 690, 153]}, {"text": "The red, green and blue values are then converted to bytes and assigned to the texture accordingly.", "bbox": [202.046875, 1384.9375, 726, 25]}, {"text": "Flowing lava", "bbox": [202.046875, 1433.4375, 726, 20]}, {"text": "Flowing lava uses the exact same texture as still lava, however there is also a spatial translation to give the appearance of movement. This transformation moves the lava texture downwards by one pixel after a fixed amount of time,[more information needed] wrapping the bottom layer of the texture back to the top.", "bbox": [202.046875, 1462.4375, 726, 73]}]}